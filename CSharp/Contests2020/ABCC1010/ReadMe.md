# ABCC 1010

## D
`a > b` とする。  
2つの正方形を独立に配置できる全体の数から、2つの正方形が重なる場合の数を引けばよい。

```
全体: (n - a + 1)^2・(n - b + 1)^2
```

重なったときのサイズで場合分けする。縦または横が a のときが特殊である。  
縦または横の最大値は `m = min(n, a + b - 1)`。

以下、次の表で場合分けを表す `(a < x, y ≤ m)`。

| | |
-|-
| (2) (a, y) | (3) (x, y) |
| (1) (a, a) | (2) (x, a) |

2つの正方形が重なるときの形の数は、

| | |
-|-
| 2(a - b + 1) | 4 |
| (a - b + 1)^2 | 2(a - b + 1) |

重なった正方形を配置する場合の数は、

| | |
-|-
| 連続的に変化 | x, y の値により、(n - m + 1)^2 から (n - a)^2 まで変化 |
| (n - a + 1)^2 | 連続的に変化 |

これらを掛けると、`(n - m + 1) + … + (n - a) = (2 * n - m - a + 1) * (m - a) / 2` より、
- (1) `(n - a + 1)^2・(a - b + 1)^2`
- (2) `2(n - a + 1) (a - b + 1) (2 * n - m - a + 1) (m - a)`
- (3) `(2 * n - m - a + 1)^2・(m - a)^2`

これらの和を因数分解すると、
```
( (n - a + 1) * (a - b + 1) + (2 * n - m - a + 1) * (m - a) )^2
```

## E
まず、あるマスを照らす置き方の数を求める。
```
u: そのマスを照らせる照明の数
```

とすると、`(2^u - 1)・2^{k-u}` 通り。

すべてのマスについて、この和を求めればよい。
