# PAST 202010

## N
1行分のデータを `0 ≤ x < 2^6` で表す。  
3行分を bit 全探索し、その中央の行が条件を満たすかどうかを記録しておく。O(6・2^18)

入力データの上に2行分、下に2行分の空行 (0) を追加する。

```
dp[i][x]: i 行目からの2行分が x である場合の数
```

`?` を含む実際の3行分のデータが条件を満たしていれば `dp[i - 1]` の値を加算する。O(18・6・2^18)

## O
宝箱を開けなければ `∑ a_i` の支出と考え、支出の最小化を目指す。  
頂点 0 および宝箱を表す頂点 i を用意し、頂点 0 から N までの最小コストを Dijkstra 法で求める。  
鍵屋に `c_i` を支払うことでショートカットできる。

- 頂点 i - 1 から i へコスト `a_i` の有向辺
- 頂点 i から i - 1 へコスト 0 の有向辺
- 頂点 l - 1 から r へコスト `c_i` の有向辺
